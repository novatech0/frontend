<div class="appointments-page">
  <!-- Header con título y botón historial -->
  <div class="page-header">
    <h1 class="page-title">Mis Citas</h1>
    <button 
      class="history-button" 
      routerLink="/apps/appointments/history"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Historial</span>
    </button>
  </div>

  <!-- Loading state -->
  @if(loading) {
    <div class="loading-state">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  }

  <!-- Empty state -->
  @if(!loading && appointments.length == 0) {
    <div class="empty-state">
      <p>No tienes citas programadas.</p>
    </div>
  }

  <!-- Grid de citas (2 por fila) -->
  @if(!loading && appointments.length > 0) {
    <div class="appointments-grid">
      @for(appointment of appointments; track appointment.id) {
        <div class="appointment-card" (click)="goToDetail(appointment.id)">
          <!-- Foto del asesor -->
          <img
            [src]="appointment.advisorPhoto || 'assets/images/profile/user-1.jpg'"
            class="advisor-photo"
            alt="Foto de {{ appointment.advisorName }}"
          />
          
          <!-- Información -->
          <div class="appointment-details">
            <h3 class="advisor-name">{{ appointment.advisorName }}</h3>
            <div class="divider-line"></div>
            <p class="appointment-date">
              {{ appointment.scheduledDate | date: "d 'de' MMMM 'de' y" : undefined : 'es' }}
            </p>
            <p class="appointment-time">
              {{ appointment.startTime | timeFormat }} - {{ appointment.endTime | timeFormat }}
            </p>
          </div>
        </div>
      }
    </div>
  }
</div>
